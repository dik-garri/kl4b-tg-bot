# TODOs

Будущие улучшения для KL4B бота.

---

## Сделано

- [x] **Отправка отчёта в личку админу** — `/report` шлёт CSV + ссылку на Google Sheet в DM
- [x] **CSV отчёт вместо PNG** — PNG экспорт нестабилен, заменён на CSV + ссылку
- [x] **Роли и команды** — admin/member, `/report`, `/getlastreport`, `/help`
- [x] **Идемпотентность** — повторный запуск для обработанной недели заблокирован
- [x] **Дедупликация webhook-ретраев** — через CacheService
- [x] **Деплой через clasp** — `clasp push` из `gas/` директории

---

## Отчёты

- [ ] **Тегать пользователей в отчёте**
  - Тегать пользователей (@username) в отчёте
  - `@username` работает только если у пользователя есть username
  - Для тега без username использовать `[имя](tg://user?id=USER_ID)` в MarkdownV2
  - Telegram может ограничивать массовые теги (антиспам)

---

## Данные

- [ ] **Заполнить report_name для участников**
  - Сейчас у всех report_name = first_name
  - Нужно вручную вписать полные имена

- [ ] **Исправить данные после множественного запуска W08**
  - Некоторые участники могли получить лишние страйки
  - Проверить history и members на корректность

---

## Инфраструктура

- [ ] **Автоматический деплой при git push**
  - clasp настроен, `clasp push` работает
  - Рассмотреть CI/CD (GitHub Actions) для автоматического `clasp push` при push в main
  - Новый деплой всё ещё нужно создавать вручную в GAS (Deploy → New deployment)
